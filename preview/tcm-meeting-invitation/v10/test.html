<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=720, user-scalable=no">
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no, url=no">
    <title> test </title>
    <meta name="description" content="">
</head>
<body>
    <div id="app"></div>
    <script src="//www.lixinliang.com/preview/tcm-meeting-invitation/v10/assets/zepto.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script type="text/javascript">
        // $(function () {
        //     var url = 'http://video.zanwh.com/shoun/info/wxInfo!getWxInfo';
        //     var log = function(label, message) {
        //         $('<p>').html(label + ': ' + message).appendTo($('#app'));
        //     }
        //     $.ajax({
        //         url: url,
        //         data: {
        //             url: decodeURIComponent(location.href),
        //         },
        //         success : function( response ) {
        //             var result = JSON.parse(response);
        //             var info = result.inf;
        //             log('appId', info.appId);
        //             log('nonceStr', info.nonceStr);
        //             log('signature', info.signature);
        //             log('timestamp', info.timestamp);
        //             wx.config({
        //                 appId: info.appId,
        //                 nonceStr: info.nonceStr,
        //                 signature: info.signature,
        //                 timestamp: info.timestamp,
        //                 jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage']
        //             });
        //             wx.ready(function () {
        //                 var share_title = 'share_title';
        //                 var share_desc = 'share_desc';
        //                 var share_link = location.href;
        //                 var share_img = 'http://www.lixinliang.com/preview/tcm-meeting-invitation/v10/img/share.png';
        //                 wx.onMenuShareTimeline({
        //                     title: share_title,
        //                     link: share_link,
        //                     imgUrl: share_img,
        //                 });
        //                 wx.onMenuShareAppMessage({
        //                     title: share_title,
        //                     desc: share_desc,
        //                     link: share_link,
        //                     imgUrl: share_img,
        //                     type: '',
        //                     dataUrl: '',
        //                 });
        //             });
        //         },
        //     });
        // });
        $(function () {
            var log = function(label, message) {
                $('<p>').html(label + ': ' + message).appendTo($('#app'));
            }
            var url = 'http://video.zanwh.com/shoun/info/wxInfo!getWxInfo';
            $.ajax({
                url: url,
                data: {
                    url: decodeURIComponent(location.href),
                },
                dataType : 'jsonp',
                jsonp : 'callBack',
                success : function( response ) {
                    // var result = JSON.parse(response);
                    // var info = result.inf;
                    var info = response.inf;
                    // log('appId', info.appId);
                    // log('nonceStr', info.nonceStr);
                    // log('signature', info.signature);
                    // log('timestamp', info.timestamp);
                    // return;
                    wx.config({
                        appId: info.appId,
                        nonceStr: info.nonceStr,
                        signature: info.signature,
                        timestamp: info.timestamp,
                        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage']
                    });
                    wx.ready(function () {
                        var share_title = 'share_title';
                        var share_desc = 'share_desc';
                        var share_link = location.href;
                        var share_img = 'http://www.lixinliang.com/preview/tcm-meeting-invitation/v10/img/share.png';
                        wx.onMenuShareTimeline({
                            title: share_title,
                            link: share_link,
                            imgUrl: share_img,
                        });
                        wx.onMenuShareAppMessage({
                            title: share_title,
                            desc: share_desc,
                            link: share_link,
                            imgUrl: share_img,
                            type: '',
                            dataUrl: '',
                        });
                    });
                },
            });
        });
    </script>
</body>
</html>
